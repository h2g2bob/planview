<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<!--
 * planview - Query Plan Visualizer
 * Copyright (C) 2010-2019  Daniele Varrazzo
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
-->
<!-- v2 -->
<html>
  <head>
    <title>Query Plan Visualizer</title>
    <link rel="stylesheet" href="planview.css" type="text/css" media="all" />
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/ui-lightness/jquery-ui.css" type="text/css" media="all" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.js" defer></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.js" defer></script>
    <script type="text/javascript" src="jquery.svg.js" defer></script>
    <script type="text/javascript" src="jquery.tooltip.js" defer></script>
    <script type="text/javascript" src="planview.js" defer></script>
    <script type="text/javascript">
      <!--
      window.addEventListener("load", function() {
        $('#input-txt').tooltip();

        $('#demo-btn').tooltip().click(function(event) {
          $('#input-txt').load('/test/data/plan1.txt');
          event.preventDefault();
        });

        $('#timeline-btn').tooltip().click(function() {
          var remove_header_footer = (function (text) {
            return text.
              replace(RegExp("^[\\s]*QUERY PLAN[\\s]+[-]*[\\s]*"), "").
              replace(RegExp("\\(1 row\\)[\\s]*$"), "");
          });

          try {
            planview.renderReport(
              remove_header_footer($("#input-txt").val()),
              $("#output-area").show().empty());
          } catch (e) {
            $('#output-area').hide();
            alert("Query plan parsing failed: '" + e + "'.");
          }
        });
      });
      -->
    </script>
  </head>
  <body>
    <h2>PostgreSQL query plan visualizer</h2>
    <p>Display the timeline of a query execution.</p>
    <p>This is a client-side tool: no data is sent to the server.</p>

    <div class="input-div">
      <textarea id="input-txt" cols="120" rows="15" title="Enter the result of an EXPLAIN or EXPLAIN ANALYZE statement."></textarea>
      <br/>
      <button id="timeline-btn" value="Timeline" title="Generate the plan chart.">Timeline</button>
      <a id="demo-btn" href="#" title="Insert an example plan in the input box.">Demo</a>
    </div>
    <div id="output-area" style="display: none"></div>

    <div id="advice">
      <h3>About</h3>
      <p><a href="https://dbatley.com/blog/2019/06/dbplanview.html">What do the diagrams show?</a></p>
    </div>

    <div class="copyright">
      <hr />
      <p>This service is run by <a href="https://dbatley.com/">David Batley</a>.</p>
      <p>It's based on <a href="https://github.com/h2g2bob/planview">Daniele Varrazzo's amazing planview code</a>, but blame any bugs or missing features on David Batley.</p>
      <p>&copy; 2019 David Batley, 2010 Daniele Varrazzo</p>
    </div>
  </body>
</html>



